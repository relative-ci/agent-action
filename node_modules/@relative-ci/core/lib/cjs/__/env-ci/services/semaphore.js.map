{"version":3,"file":"semaphore.js","sources":["../../../../../../../node_modules/env-ci/services/semaphore.js"],"sourcesContent":["import { head } from \"../lib/git.js\";\n\n// 1.0: https://semaphoreci.com/docs/available-environment-variables.html\n// 2.0: https://docs.semaphoreci.com/article/12-environment-variables\n\nexport default {\n  detect({ env }) {\n    return Boolean(env.SEMAPHORE);\n  },\n  configuration({ env, cwd }) {\n    const pr = env.SEMAPHORE_GIT_PR_NUMBER || env.PULL_REQUEST_NUMBER;\n    const isPr = Boolean(pr);\n\n    return {\n      name: \"Semaphore\",\n      service: \"semaphore\",\n      commit: env.SEMAPHORE_GIT_SHA || head({ env, cwd }),\n      tag: env.SEMAPHORE_GIT_TAG_NAME,\n      build: env.SEMAPHORE_JOB_ID || env.SEMAPHORE_BUILD_NUMBER,\n      branch: env.SEMAPHORE_GIT_BRANCH || (isPr ? undefined : env.BRANCH_NAME),\n      pr,\n      isPr,\n      prBranch:\n        env.SEMAPHORE_GIT_PR_BRANCH || (isPr ? env.BRANCH_NAME : undefined),\n      slug: env.SEMAPHORE_GIT_REPO_SLUG || env.SEMAPHORE_REPO_SLUG,\n      root: env.SEMAPHORE_GIT_DIR || env.SEMAPHORE_PROJECT_DIR,\n    };\n  },\n};\n"],"names":["head"],"mappings":";;;;AAEA;AACA;;AAEA,gBAAe;AACf,EAAE,MAAM,CAAC,EAAE,GAAG,EAAE,EAAE;AAClB,IAAI,OAAO,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC;AACjC,EAAE,CAAC;AACH,EAAE,aAAa,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE;AAC9B,IAAI,MAAM,EAAE,GAAG,GAAG,CAAC,uBAAuB,IAAI,GAAG,CAAC,mBAAmB;AACrE,IAAI,MAAM,IAAI,GAAG,OAAO,CAAC,EAAE,CAAC;;AAE5B,IAAI,OAAO;AACX,MAAM,IAAI,EAAE,WAAW;AACvB,MAAM,OAAO,EAAE,WAAW;AAC1B,MAAM,MAAM,EAAE,GAAG,CAAC,iBAAiB,IAAIA,QAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;AACzD,MAAM,GAAG,EAAE,GAAG,CAAC,sBAAsB;AACrC,MAAM,KAAK,EAAE,GAAG,CAAC,gBAAgB,IAAI,GAAG,CAAC,sBAAsB;AAC/D,MAAM,MAAM,EAAE,GAAG,CAAC,oBAAoB,KAAK,IAAI,GAAG,SAAS,GAAG,GAAG,CAAC,WAAW,CAAC;AAC9E,MAAM,EAAE;AACR,MAAM,IAAI;AACV,MAAM,QAAQ;AACd,QAAQ,GAAG,CAAC,uBAAuB,KAAK,IAAI,GAAG,GAAG,CAAC,WAAW,GAAG,SAAS,CAAC;AAC3E,MAAM,IAAI,EAAE,GAAG,CAAC,uBAAuB,IAAI,GAAG,CAAC,mBAAmB;AAClE,MAAM,IAAI,EAAE,GAAG,CAAC,iBAAiB,IAAI,GAAG,CAAC,qBAAqB;AAC9D,KAAK;AACL,EAAE,CAAC;AACH,CAAC;;;;","x_google_ignoreList":[0]}