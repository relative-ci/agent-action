'use strict';

var git = require('../lib/git.js');

// https://docs.aws.amazon.com/codebuild/latest/userguide/build-env-ref-env-vars.html

var codebuild = {
  detect({ env }) {
    return Boolean(env.CODEBUILD_BUILD_ID);
  },
  configuration({ env, cwd }) {
    return {
      name: "AWS CodeBuild",
      service: "codebuild",
      commit: git.head({ env, cwd }),
      build: env.CODEBUILD_BUILD_ID,
      branch: git.branch({ env, cwd }),
      buildUrl: `https://console.aws.amazon.com/codebuild/home?region=${env.AWS_REGION}#/builds/${env.CODEBUILD_BUILD_ID}/view/new`,
      root: env.PWD,
    };
  },
};

module.exports = codebuild;
//# sourceMappingURL=codebuild.js.map
